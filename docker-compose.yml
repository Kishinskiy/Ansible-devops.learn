services:
  keycloak:
    image: quay.io/keycloak/keycloak:24.0
    command: start-dev --http-port=8080
    environment:
      KEYCLOAK_ADMIN: admin
      KEYCLOAK_ADMIN_PASSWORD: admin
    ports:
      - "8080:8080"
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "bash", "-c", "/opt/keycloak/bin/kc.sh show-config || exit 1"]
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 20s
volumes:
  keycloak_data:
